<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¾³æ´²å…«å¤§åæ ¡ (Go8) äº¤äº’å¯¹æ¯”ç³»ç»Ÿ - å’¨è¯¢ç‰ˆ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <style>
        :root { --primary: #003049; --accent: #f77f00; --gold: #fcbf49; --gray: #f8f9fa; --wechat: #07c160; }
        body { background-color: #f0f2f5; margin: 0; font-family: 'Segoe UI', Arial, sans-serif; padding-bottom: 100px; }
        
        /* å“åº”å¼ä¸»å®¹å™¨ */
        .main-container {
            max-width: 1400px; margin: 15px auto; background: #fff;
            padding: 15px; border-radius: 15px; display: flex; gap: 15px; height: 65vh;
        }

        #sidebar { width: 320px; display: flex; flex-direction: column; background: var(--gray); border-radius: 10px; padding: 10px; }
        #university-list { flex: 1; overflow-y: auto; }
        .uni-item { padding: 12px; margin-bottom: 6px; background: #fff; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; font-size: 14px; transition: 0.2s; }
        .uni-item:hover { border-color: var(--accent); background: #fffbf5; }
        .uni-item.selected { border-left: 5px solid var(--accent); background: #fffcf0; font-weight: bold; }

        #map { flex: 1; border-radius: 10px; z-index: 1; min-height: 300px; }

        .comparison-section {
            max-width: 1400px; margin: 15px auto; background: #fff;
            padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            overflow-x: auto; /* å…³é”®ï¼šå…è®¸è¡¨æ ¼æ¨ªå‘æ»šåŠ¨ */
        }
        .comp-table { width: 100%; border-collapse: collapse; margin-top: 10px; min-width: 600px; /* ä¿è¯å¯¹æ¯”æ—¶å†…å®¹ä¸æŒ¤å‹ */ }
        .comp-table th, .comp-table td { border: 1px solid #eee; padding: 12px; text-align: left; font-size: 14px; }
        .dim-label { background: #f8f9fa; width: 120px; font-weight: bold; color: #666; }
        .uni-name-header { background: var(--primary) !important; color: white !important; text-align: center; font-size: 16px; }
        
        /* ç§Ÿé‡‘è¿›åº¦æ¡ */
        .rent-bar-container { background: #eee; border-radius: 10px; height: 10px; width: 100%; margin-top: 8px; overflow: hidden; }
        .rent-bar-fill { height: 100%; background: linear-gradient(90deg, #fcbf49, #f77f00, #d62828); transition: width 0.6s ease-in-out; }

        /* âœ¨ æ‚¬æµ®å’¨è¯¢æ¡é€‚é… */
        .sticky-consult-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: linear-gradient(135deg, #003049 0%, #005073 100%);
            color: white; padding: 12px 10px; z-index: 9999;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            display: flex; justify-content: center; align-items: center; gap: 15px; flex-wrap: wrap;
        }
        .wechat-tag { color: var(--gold); font-weight: bold; border: 1px dashed var(--gold); padding: 1px 6px; border-radius: 4px; }

        /* æ°”æ³¡æ ·å¼ */
        .u-popup { line-height: 1.6; font-size: 13px; min-width: 220px; }
        .u-title { font-weight: bold; font-size: 15px; color: var(--primary); border-bottom: 2px solid var(--accent); margin-bottom: 8px; }
        .tag-qs { background: #fcbf49; color: #333; padding: 1px 5px; border-radius: 3px; font-size: 11px; float: right; font-weight: bold; }
        
        .placeholder { text-align: center; padding: 30px; color: #999; border: 2px dashed #eee; border-radius: 10px; font-size: 14px; }
        .data-source { font-size: 11px; color: #999; text-align: center; margin-top: 15px; font-style: italic; }

        /* ================= ğŸ“± ç§»åŠ¨ç«¯ä¸“é¡¹é€‚é… ================= */
        @media (max-width: 768px) {
            h1 { font-size: 20px !important; }
            .main-container {
                flex-direction: column; /* åˆ—è¡¨å’Œåœ°å›¾æ”¹ä¸ºä¸Šä¸‹æ’åˆ— */
                height: auto;
                margin: 10px;
            }
            #sidebar {
                width: 100%;
                height: 300px; /* ç»™åˆ—è¡¨ä¸€ä¸ªå›ºå®šé«˜åº¦ */
                order: 2; /* åœ°å›¾æ’åœ¨ä¸Šé¢ï¼Œåˆ—è¡¨æ’åœ¨ä¸‹é¢ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ */
            }
            #map {
                width: 100%;
                height: 350px;
                order: 1;
            }
            .comparison-section {
                margin: 10px;
                padding: 10px;
            }
            .sticky-consult-bar {
                gap: 5px;
                font-size: 12px;
            }
            .sticky-consult-bar span { width: 100%; text-align: center; } /* æ‰‹æœºä¸Šæ–‡å­—å±…ä¸­æ¢è¡Œ */
        }
    </style>
</head>
<body>

<div style="text-align: center; padding: 15px 10px;">
    <h1 style="color: var(--primary); margin: 0; font-size: 24px;">ğŸ‡¦ğŸ‡º æ¾³æ´²å…«å¤§ (Go8) äº¤äº’å¯¹æ¯”ç³»ç»Ÿ</h1>
    <p style="color: #666; font-size: 14px; margin-top: 5px;">2026 QS æ’åä¸ NPL é…é¢æ·±åº¦è§£æ | <strong>ç ”ç©¶ç”Ÿæ··ç”³æŒ‡å¯¼</strong></p>
</div>

<div class="sticky-consult-bar">
    <span>ğŸš€ ç ”ç©¶ç”Ÿç•™å­¦å…¨çƒæ··ç”³å…è´¹å’¨è¯¢</span>
    <span>æ·»åŠ å¾®ä¿¡ï¼š<span class="wechat-tag">wmcx123456</span></span>
    <span>é‚®ç®±ï¼š<strong>NBShoushi@outlook.com</strong></span>
</div>

<div class="main-container">
    <div id="sidebar">
        <div style="margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
            <strong style="font-size: 15px;">Go8 é™¢æ ¡åˆ—è¡¨</strong>
            <button onclick="resetSelection()" style="cursor:pointer; padding: 4px 10px; font-size: 12px; background: #fff; border: 1px solid #ccc; border-radius: 4px;">é‡ç½®</button>
        </div>
        <div id="university-list"></div>
    </div>
    <div id="map"></div>
</div>

<div class="comparison-section">
    <div id="comp-grid">
        <div class="placeholder">è¯·åœ¨åˆ—è¡¨å‹¾é€‰ 2 æ‰€å­¦æ ¡å¼€å¯æ·±åº¦å¯¹æ¯”</div>
    </div>
     <div style="text-align: center; padding: 20px 0; color: #bdc3c7; font-size: 10px;">
    Â© 2026 æ¾³æ´²å…«å¤§äº¤äº’åœ°å›¾é¡¹ç›® | ç ”ç©¶ç”Ÿç•™å­¦å’¨è¯¢å¾®ä¿¡ï¼šwmcx123456
</div>

<script>
    const universityData = [
        { 
            name: "å¢¨å°”æœ¬å¤§å­¦ (UniMelb)", city: "å¢¨å°”æœ¬", coords: [-37.7964, 144.9612], qsRank: 19, 
            quota: "ğŸ”´ æåº¦ç´§å¼  (NPLé…é¢å‰Šå‡æ˜¾è‘—)", migration: "æ ‡å‡†ç§¯åˆ† (æ‚‰å¢¨åœ°åŒºç«äº‰å¤§)",
            rent: "A$350 - A$550/å‘¨", strength: "æ³•å¾‹ã€åŒ»å­¦ã€å•†ç§‘", dist: "Parkville; Southbank",
            economy: "ç»´å·ç”Ÿç‰©åŒ»è¯æ¢çº½", traffic: "Stop 1 ç”µè½¦ç«™", employ: "92%", intl: "48%", env: "å­¦æœ¯å¯†é›†ï¼Œéƒ½å¸‚è¾¹ç¼˜"
        },
        { 
            name: "æ–°å—å¨å°”å£«å¤§å­¦ (UNSW)", city: "æ‚‰å°¼", coords: [-33.9174, 151.2313], qsRank: 20, 
            quota: "ğŸ”´ æåº¦ç´§å¼  (å·¥ç¨‹/ITé…é¢ç§’ç©º)", migration: "æ ‡å‡†ç§¯åˆ† (éœ€ 189/190 é«˜åˆ†ç«äº‰)",
            rent: "A$450 - A$650/å‘¨", strength: "å·¥ç¨‹ã€è®¡ç®—æœºã€å¤ªé˜³èƒ½", dist: "Kensington; Paddington",
            economy: "æ‚‰å°¼ç§‘æŠ€èµ°å»Šæ ¸å¿ƒ", traffic: "è½»è½¨ L2/L3 ç›´è¾¾", employ: "94%", intl: "45%", env: "èŒåœºå¯¼å‘ï¼ŒèŠ‚å¥æå¿«"
        },
        { 
            name: "æ‚‰å°¼å¤§å­¦ (USYD)", city: "æ‚‰å°¼", coords: [-33.8886, 151.1873], qsRank: 25, 
            quota: "ğŸ”´ æåº¦ç´§å¼  (å‘OfferèŠ‚å¥å˜æ…¢)", migration: "æ ‡å‡†ç§¯åˆ† (ä¼šè®¡/å•†ç§‘éš¾åº¦é«˜)",
            rent: "A$450 - A$650/å‘¨", strength: "åŒ»å­¦ã€æ³•å¾‹ã€å»ºç­‘ã€æ”¿æ²»", dist: "Camperdown; Westmead",
            economy: "æ‚‰å°¼ CBD é‡‘èä¼ åª’åœˆ", traffic: "Redfern ç«è½¦ç«™", employ: "91%", intl: "44%", env: "ä¼ ç»Ÿè´µæ—æ°”è´¨ï¼Œç ‚å²©åœ°æ ‡"
        },
        { 
            name: "æ¾³æ´²å›½ç«‹å¤§å­¦ (ANU)", city: "å ªåŸ¹æ‹‰", coords: [-35.2830, 149.1211], qsRank: 32, 
            quota: "ğŸŸ¡ ä¸­ç­‰ç´§å¼  (é…é¢ç›¸å¯¹å®½è£•)", migration: "âœ… åè¿œåœ°åŒºåŠ åˆ† (ACTå·æ‹…å‹å¥½)",
            rent: "A$280 - A$420/å‘¨", strength: "å›½å…³ã€ç‰©ç†ã€å¤©æ–‡", dist: "Acton; Mt Stromlo",
            economy: "è”é‚¦æ”¿åºœåŠæ™ºåº“ä¸­å¿ƒ", traffic: "å ªåŸ¹æ‹‰è½»è½¨ç³»ç»Ÿ", employ: "88%", intl: "38%", env: "å®é™æ£®æ—æ ¡å›­ï¼Œå­¦æœ¯å¯†åº¦é«˜"
        },
        { 
            name: "è«çº³ä»€å¤§å­¦ (Monash)", city: "å¢¨å°”æœ¬", coords: [-37.9150, 145.1300], qsRank: 36, 
            quota: "ğŸ”´ æåº¦ç´§å¼  (é…é¢å‹åŠ›é‡)", migration: "æ ‡å‡†ç§¯åˆ† (æŠ¤ç†/æ•™è‚²ä»åˆ©å¥½)",
            rent: "A$260 - A$450/å‘¨", strength: "è¯å‰‚å­¦ã€ITã€æŠ¤ç†ã€æ•™è‚²", dist: "Clayton; Caulfield",
            economy: "å¢¨å°”æœ¬ä¸œå—äº§ä¸šå¸¦", traffic: "Clayton æ¢çº½æ ¡è½¦", employ: "86%", intl: "45%", env: "ç°ä»£åˆ›æ–°ï¼Œå…¨æ¾³è§„æ¨¡æœ€å¤§"
        },
        { 
            name: "æ˜†å£«å…°å¤§å­¦ (UQ)", city: "å¸ƒé‡Œæ–¯ç­", coords: [-27.4975, 153.0137], qsRank: 42, 
            quota: "ğŸŸ  é«˜åº¦ç´§å¼  (å¸ƒæ‘çƒ­åº¦æŒç»­ä¸Šå‡)", migration: "æ ‡å‡†ç§¯åˆ† (å·²éåè¿œåœ°åŒº)",
            rent: "A$250 - A$400/å‘¨", strength: "ç”Ÿç‰©ã€çŸ¿ä¸šã€ç¯å¢ƒç§‘å­¦", dist: "St Lucia; Herston",
            economy: "2032 å¥¥è¿ç»æµå¢é•¿æ", traffic: "CityCat æ¸¡è½®æ€»ç«™", employ: "85%", intl: "32%", env: "è“èŠ±æ¥¹ç¾æ™¯ï¼Œç§‘ç ”ç”Ÿæ´»å¹³è¡¡"
        },
        { 
            name: "è¥¿æ¾³å¤§å­¦ (UWA)", city: "ç€æ–¯", coords: [-31.9801, 115.8182], qsRank: 77, 
            quota: "ğŸŸ¢ ç›¸å¯¹å®½æ¾ (æ”¿åºœé¼“åŠ±æµå‘è¥¿æ¾³)", migration: "ğŸ”¥ åè¿œåœ°åŒºåŠ åˆ† (è¥¿æ¾³å·æ‹…ç¨³å¥)",
            rent: "A$240 - A$380/å‘¨", strength: "çŸ¿ä¸šã€æµ·æ´‹ã€èƒ½æºå·¥ç¨‹", dist: "Crawley; Albany",
            economy: "ä¸–ç•ŒçŸ¿ä¸šå·¨å¤´æ€»éƒ¨", traffic: "ç€æ–¯å…¬äº¤ç³»ç»Ÿ", employ: "82%", intl: "25%", env: "åœ°ä¸­æµ·æ°”å€™ï¼Œç”Ÿæ´»èŠ‚å¥èˆ’ç¼“"
        },
        { 
            name: "é˜¿å¾·è±å¾·å¤§å­¦ (Adelaide Uni)", city: "é˜¿å¾·è±å¾·", coords: [-34.9205, 138.6052], qsRank: 82, 
            quota: "ğŸŸ¢ ç›¸å¯¹å®½æ¾ (åˆå¹¶æ”¿ç­–æ”¯æŒ)", migration: "ğŸ”¥ åè¿œåœ°åŒºåŠ åˆ† (å—æ¾³å·æ‹…æä½³)",
            rent: "A$220 - A$360/å‘¨", strength: "è‘¡è„é…’ã€AIã€å†œå­¦", dist: "North Terrace; Waite",
            economy: "é˜²å¾¡ã€èˆªå¤©åŠç”Ÿå‘½ç§‘å­¦æ¢çº½", traffic: "å¸‚ä¸­å¿ƒå…è´¹ç”µè½¦", employ: "81%", intl: "30%", env: "åˆå¹¶åæ–°æ°”è±¡ï¼Œæ²»å®‰æä½³"
        }
    ];

    let selectedUnis = [];
    const map = L.map('map').setView([-25.27, 133.77], 4);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);
    let markerLayer = L.markerClusterGroup().addTo(map);

    function createPopupHtml(u) {
        return `
            <div class="u-popup">
                <div class="u-title">${u.name} <span class="tag-qs">QS #${u.qsRank}</span></div>
                <div class="u-row"><span class="label">ğŸ¢ æ ¡åŒºï¼š</span>${u.dist}</div>
                <hr>
                <div class="u-row" style="color:#d62828;"><span class="label">ğŸ“… é…é¢ï¼š</span>${u.quota}</div>
                <div class="u-row" style="color:#d35400;"><span class="label">ğŸ’° ç§Ÿé‡‘ï¼š</span>${u.rent}</div>
                <div class="u-row"><span class="label">ğŸŒ³ ç¯å¢ƒï¼š</span>${u.env}</div>
            </div>
        `;
    }

    function init() {
        const list = document.getElementById('university-list');
        universityData.sort((a,b) => a.qsRank - b.qsRank).forEach(u => {
            const div = document.createElement('div');
            div.className = 'uni-item';
            div.innerHTML = `<strong>#${u.qsRank}</strong> ${u.name}`;
            div.onclick = () => toggleUni(u, div);
            list.appendChild(div);
        });
        updateMap();
    }

    function toggleUni(u, el) {
        const idx = selectedUnis.indexOf(u.name);
        if(idx > -1) { selectedUnis.splice(idx, 1); el.classList.remove('selected'); }
        else {
            if(selectedUnis.length >= 2) return alert("å¯¹æ¯”åŠŸèƒ½ä»…æ”¯æŒä¸¤æ‰€å­¦æ ¡ã€‚");
            selectedUnis.push(u.name); el.classList.add('selected');
        }
        updateMap(); renderComparison();
    }

    function updateMap() {
        markerLayer.clearLayers();
        const displayData = selectedUnis.length > 0 ? universityData.filter(u => selectedUnis.includes(u.name)) : universityData;
        displayData.forEach(u => {
            const m = L.circleMarker(u.coords, { radius: 10, fillColor: '#d62828', color: '#fff', weight: 2, fillOpacity: 0.9 });
            m.bindPopup(createPopupHtml(u));
            markerLayer.addLayer(m);
        });
        if(selectedUnis.length > 0) {
            const bounds = markerLayer.getBounds();
            if (bounds.isValid()) map.flyToBounds(bounds, {padding:[50,50], maxZoom: 10});
        } else {
            map.setView([-25.27, 133.77], 4);
        }
    }

    function renderComparison() {
        const grid = document.getElementById('comp-grid');
        if (selectedUnis.length < 2) {
            grid.innerHTML = `<div class="placeholder">å·²å‹¾é€‰ ${selectedUnis.length} æ‰€ï¼Œè¿˜éœ€é€‰æ‹© ${2-selectedUnis.length} æ‰€å¼€å¯å¯¹æ¯”</div>`;
            return;
        }
        const a = universityData.find(u => u.name === selectedUnis[0]), b = universityData.find(u => u.name === selectedUnis[1]);
        const valA = parseInt(a.rent.match(/\d+/g)[1]), valB = parseInt(b.rent.match(/\d+/g)[1]);
        
        grid.innerHTML = `
            <table class="comp-table">
                <tr><th class="dim-label">å¯¹æ¯”ç»´åº¦</th><th class="uni-name-header">${a.name}</th><th class="uni-name-header">${b.name}</th></tr>
                <tr><td class="dim-label">ğŸ“… 2026 é…é¢ (NPL)</td><td style="color:#d62828"><b>${a.quota}</b></td><td style="color:#d62828"><b>${b.quota}</b></td></tr>
                <tr><td class="dim-label">ğŸ‡¦ğŸ‡º ç§»æ°‘/PR æ½œåŠ›</td><td style="background:#f9fff9">${a.migration}</td><td style="background:#f9fff9">${b.migration}</td></tr>
                <tr><td class="dim-label">ğŸ’° ç§Ÿé‡‘å‹åŠ›æŒ‡æ•°</td>
                    <td><b>${a.rent}</b><div class="rent-bar-container"><div class="rent-bar-fill" style="width:${(valA/700)*100}%"></div></div></td>
                    <td><b>${b.rent}</b><div class="rent-bar-container"><div class="rent-bar-fill" style="width:${(valB/700)*100}%"></div></div></td>
                </tr>
                <tr><td class="dim-label">ğŸ¯ å¼ºåŠ¿ä¸“ä¸š</td><td>${a.strength}</td><td>${b.strength}</td></tr>
                <tr><td class="dim-label">ğŸ“ æ ¡åŒºåˆ†å¸ƒ</td><td>${a.dist}</td><td>${b.dist}</td></tr>
            </table>
            <div class="data-source">
                * æ•°æ®å‚è€ƒ 2026 QS æ’ååŠæ¾³æ´² NPL é…é¢æ”¿ç­–ã€‚<br>
                * ç§Ÿé‡‘å‹åŠ›æŒ‡æ•°åŸºäºå„æ ¡åŒºå¹³å‡ç§Ÿé‡‘ä¸å¸ƒé‡Œæ–¯ç­åŸºå‡†ï¼ˆA$350/å‘¨ï¼‰çš„æ¯”å€¼è®¡ç®—ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºç§Ÿé‡‘å‹åŠ›è¶Šå¤§ã€‚
            </div>
        `;
    }

    window.onload = init;
    function resetSelection() { selectedUnis = []; document.querySelectorAll('.uni-item').forEach(i => i.classList.remove('selected')); updateMap(); renderComparison(); }
</script>
</body>
</html>